**表关系的粗略解释**

1. 这是根据实际开发中的 App 需求写的 Demo

2. 设备与房间和家庭关联, 通过 homeId 找到用户要控制的所有设备, 通过设备所在的房间填充 location 字段

**本系统的功能**

1. 从用户输入中准确识别要控制的设备,根据 location 和 deviceName 来作置信度评分
2. 优化角度: 置信度规则的优化, 设备技能边界, 健壮性检查


**总结**
1. 在物联网场景,针对设备控制智能体,推荐使用 Function Calling 来定义设备的能力, 交给 AI 去识别要调用的设备技能, 这个跟意图识别类似
2. 为了防止 AI 幻觉, 应该严格使用结构化输出, 针对置信度来筛选是否要下达控制指令
3. 使用双重调用来比对输出, 从而获取更加可靠稳定的输出(比较费 token)
4. 使用混合模式, 即 AI 输出 + 后端算法筛选